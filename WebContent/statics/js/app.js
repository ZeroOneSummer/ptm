/* 2017-06-15 19:15:18 */function getQueryString(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null}function downloadApp(){var a=navigator.userAgent,b=a.indexOf("Android")>-1||a.indexOf("Adr")>-1,c=!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),d=/micromessenger/i.test(a);/QQBrowser/i.test(a);if(!b&&!c)return"http://a.app.qq.com/o/simple.jsp?pkgname=com.kdkj.koudailicai";if(b){if(d)return"http://a.app.qq.com/o/simple.jsp?pkgname=com.kdkj.koudailicai";window.location.href="http://res.koudailc.com/download/app/koudailicai.apk"}return c?d?"http://a.app.qq.com/o/simple.jsp?pkgname=com.kdkj.koudailicai":"http://itunes.apple.com/cn/app/id953061503?mt=8":void 0}angular.module("ionic").directive("kdPane",function(){return{restrict:"E",link:function(a,b){b.addClass("pane"),b.addClass("kd-pane")}}}),angular.module("koudai",[]).directive("textScroll",["$timeout",function(a){return{restrict:"E",replace:!0,scope:{items:"=",interval:"="},template:'<ul class="text-scroll"><li ng-repeat="item in items track by $index">{{item.content}}</li></ul>',link:function(a,b,c){a.items.push(a.items[0]),a.$watch(function(){return b[0].children[0]},function(c){try{var d=b[0].children.length,e=c.offsetHeight,f=0,g=a.interval||1e3,h=function(){f++,f>=d&&(f=1,b.css("top",0)),$(b).animate({top:-e*f})};setInterval(h,g)}catch(i){}})}}}]).factory("Domain",["$location",function(a){var b=a.$$host,c=/(?:http(?:s)?:\/\/)?(?:www\.)?(.*?)\./,d=/https?:\/\/(?:[^\/]+\.)?([^.\/]+\.(?:com))(?:$|\/)/,e=b.match(c),f={www:a.$$protocol+"://"+a.$$host+"/website/web/",deposit:a.$$protocol+"://"+a.$$host+"/frontend/web/",m:a.$$protocol+"://"+a.$$host+"/mobile/web/",h5:a.$$protocol+"://"+a.$$host+"/h5/web/"};return null!==e&&("h5"===e[1]&&(f={www:a.$$protocol+"://www.koudailc.com/",deposit:a.$$protocol+"://deposit.koudailc.com/",m:a.$$protocol+"://m.koudailc.com/",h5:a.$$protocol+"://h5.koudailc.com/"}),"pre-h5"===e[1]&&(f={www:a.$$protocol+"://pre-www.koudailc.com/",deposit:a.$$protocol+"://pre-deposit.koudailc.com/",m:a.$$protocol+"://pre-m.koudailc.com/",h5:a.$$protocol+"://pre-h5.koudailc.com/"}),"42.96.204.114"!=b&&"192.168.8.101"!=b&&"121.199.1.198"!=b||(f={www:a.$$protocol+"://"+a.$$host+"/koudai_deposit/website/web/",deposit:a.$$protocol+"://"+a.$$host+"/koudai_deposit/frontend/web/",m:a.$$protocol+"://"+a.$$host+"/koudai_deposit/mobile/web/",h5:a.$$protocol+"://"+a.$$host+"/koudai_deposit/h5/web/"})),{resolveUrl:function(b){var e=b.match(c);return f[e[1]]?b.replace(d,f[e[1]]):b.replace(/^https?/,a.$$protocol)},domain:f,setShareKey:function(b){var e="http://deposit.koudailc.com/act/h5-wx-share?share_key="+b,g=e.match(c);f[g[1]]&&(e=e.replace(d,f[g[1]])),e=e.replace(/^https?/,a.$$protocol);var h=$("head").remove("script[role='reload']");$("<script></script>").attr({src:e,type:"text/javascript"}).appendTo(h)}}}]).factory("Platform",["$location",function(a){function b(b){if(void 0!==a.search()[b])return a.seach()[b];b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+b+"=([^&#]*)"),d=c.exec(location.search);return null===d?void 0:decodeURIComponent(d[1].replace(/\+/g," "))}var c=navigator.userAgent;return{getParamByName:b,isApp:c.indexOf("KDLC")>-1,isAndroid:c.indexOf("Android")>-1||c.indexOf("Adr")>-1,isIos:!!c.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),isWeixin:c.indexOf("MicroMessenger")>-1,isQQ:" qq"==c.match(/\sQQ/i)}}]).factory("Popup",["$ionicPopup",function(a){function b(b,c){a.alert({title:"提示",template:b,okText:"确定",okType:"button-koudai"}).then(function(a){"function"==typeof c&&c()})}var c=function(b){a.confirm({title:b.title||"确认",template:b.content,cancelText:"取消",cancelType:"button-koudai-gray",okText:"确定",okType:"button-koudai"}).then(function(a){"function"==typeof b.callback&&b.callback(a),a?"function"==typeof b.ok&&b.ok():"function"==typeof b.cance&&b.cance()})};return{alert:b,confirm:c}}]).factory("HttpInterceptor",["$q","$injector",function(a,b){var c={responseError:function(b){return a.reject(b)},response:function(c){if(200!==c.status){var d=b.get("Popup"),e=b.get("$ionicLoading");return e.hide(),d.alert("请求不成功"),a.reject(c)}if(void 0!==c.data.code&&c.data.code==-3){var f=b.get("Domain");return location.href=f.resolveUrl("https://deposit.koudailc.com/user/re-login-page"),a.reject(c)}return c},request:function(a){return a},requestError:function(b){return a.reject(b)}};return c}]).filter("isEmpty",function(){var a;return function(b){for(a in b)if(b.hasOwnProperty(a))return!1;return!0}}).filter("trusted",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("koudaiday",["koudai","ionic","koudaidayControllers","koudaidayFactory"]).run(["$ionicPlatform",function(a){a.ready(function(){window.StatusBar&&StatusBar.styleDefault()})}]).config(["$httpProvider","$compileProvider","$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(a,b,c,d,e){e.tabs.position("bottom"),e.tabs.style("standard"),e.navBar.alignTitle("center"),b.aHrefSanitizationWhitelist(/^\s*(https?|http?|wap2app|schemekdlc|kdlc.app.launch):/),a.defaults.withCredentials=!0,a.interceptors.push("HttpInterceptor"),c.state("home",{url:"/",templateUrl:"templates/home.html",controller:"HomeController"}),d.otherwise("/")}]),angular.module("koudaidayFactory",[]).factory("KoudaidayService",["Domain","$http","Platform","$location","$httpParamSerializerJQLike",function(a,b,c,d,e){return{popup:function(a,b,c,d){var e='<div class="overlay overlay-show">                          <div class="popups pop">                            <div class="contents"></div>                            <a class="close" href="">朕知道了</a>                            <a class="off" href="">x</a>                          </div>                        </div>',f=$(e).appendTo(".pane");a&&f.find(".contents").append("<p>"+a+"</p>"),b&&f.find(".contents").append("<p>"+b+"</p>"),c&&f.find("a.close").text(c),f.find(".off").click(function(a){$(this).parent().parent().remove()}),f.click(function(a){$(this).remove()}),f.find(".close").click(function(a){return d&&d(),!1})},getLoginUrl:function(){var b=a.resolveUrl("http://m.koudailc.com/user/user-login?redirect_url="+d.$$absUrl);return c.isApp?"wap2app://app.launch/login/applogin":b.replace("#","%23")},fundUrl:c.isApp?c.isIos?"kdlc.app.launch://?skip_code=20104":c.isAndroid?"schemekdlc://?skip_code=20104":"":"http://m.koudailc.com",getData:function(){var c=a.resolveUrl("http://deposit.koudailc.com/act/newcomer-gain-v2");return b.get(c).then(function(a){return a.data})}}}]),angular.module("koudaidayControllers",[]).controller("HomeController",["$scope","KoudaidayService","$ionicLoading","$state","Domain","Popup","Platform",function(a,b,c,d,e,f,g){b.getData().then(function(b){a.data=b}),a.fundUrl=b.fundUrl}]);